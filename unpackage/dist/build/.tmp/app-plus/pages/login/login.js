(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"0b99":function(e,n,t){"use strict";var o=function(){var e=this,n=e.$createElement;e._self._c},i=[];t.d(n,"a",function(){return o}),t.d(n,"b",function(){return i})},"0e70":function(e,n,t){"use strict";t.r(n);var o=t("39f8"),i=t.n(o);for(var a in o)"default"!==a&&function(e){t.d(n,e,function(){return o[e]})}(a);n["default"]=i.a},1184:function(e,n,t){},"169e":function(e,n,t){"use strict";var o=t("1184"),i=t.n(o);i.a},"39f8":function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;r(t("88d4"));var o=r(t("63c9")),i=r(t("852a")),a=t("2f62");function r(e){return e&&e.__esModule?e:{default:e}}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},o=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(n){u(e,n,t[n])})}return e}function u(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var c={data:function(){return{phoneNumber:"",passwd:"",isShowOauth:!1,showProvider:{weixin:!1,qq:!1,sinaweibo:!1,xiaomi:!1}}},onShow:function(){},onLoad:function(){this.isShowOauth=!0,this.getProvider()},methods:s({},(0,a.mapMutations)(["login"]),{oauthLogin:function(n){e.showLoading(),e.login({provider:n,success:function(t){console.log("success: "+JSON.stringify(t)," at pages\\login\\login.vue:76"),e.getUserInfo({provider:n,success:function(n){console.log("用户信息："+JSON.stringify(n.userInfo)," at pages\\login\\login.vue:81"),e.setStorage({key:"UserInfo",data:{username:n.userInfo.nickName,face:n.userInfo.avatarUrl,signature:"个性签名",integral:0,balance:0,envelope:0},success:function(){e.hideLoading(),e.showToast({title:"登录成功",icon:"success"}),setTimeout(function(){e.navigateBack()},300)}})}})},fail:function(e){console.log("fail: "+JSON.stringify(e)," at pages\\login\\login.vue:104")}})},getProvider:function(){var n=this;e.getProvider({service:"oauth",success:function(e){for(var t=e.provider.length,o=0;o<t;o++)n.showProvider[e.provider[o]]=!0;0==e.provider.length&&(n.isShowOauth=!1)}})},toPage:function(n){e.hideKeyboard(),e.navigateTo({url:n})},doLogin:function(){var n=this;if(e.hideKeyboard(),!/^1(3|4|5|6|7|8|9)\d{9}$/.test(this.phoneNumber))return e.showToast({title:"请填写正确手机号码",icon:"none"}),!1;e.showLoading({title:"提交中..."});var t={username:this.phoneNumber,password:this.passwd};o.default.login(t,function(t){e.hideLoading(),console.log(666,t," at pages\\login\\login.vue:147"),t.data.code-200==0?(e.showToast({title:"登录成功",icon:"success"}),e.setStorage({key:"token",data:t.data.data.tokenHead+" "+t.data.data.token}),i.default.getCurrentUserInfo(function(e){var t=e.data.data;n.login(t)}),e.navigateBack()):e.showToast({title:t.data.message,icon:"none"})})}})};n.default=c}).call(this,t("6e42")["default"])},8337:function(e,n,t){"use strict";t.r(n);var o=t("0b99"),i=t("0e70");for(var a in i)"default"!==a&&function(e){t.d(n,e,function(){return i[e]})}(a);t("169e");var r=t("2877"),s=Object(r["a"])(i["default"],o["a"],o["b"],!1,null,null,null);n["default"]=s.exports}},[["7c80","common/runtime","common/vendor"]]]);